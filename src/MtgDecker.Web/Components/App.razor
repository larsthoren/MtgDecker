@using static Microsoft.AspNetCore.Components.Web.RenderMode
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <base href="/" />
    <ResourcePreloader />
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
    <link href="_content/MudBlazor/MudBlazor.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="@Assets["app.css"]" />
    <link rel="stylesheet" href="@Assets["MtgDecker.Web.styles.css"]" />
    <ImportMap />
    <HeadOutlet />
</head>

<body>
    <Routes @rendermode="InteractiveServer" />
    <ReconnectModal />
    <script src="_content/MudBlazor/MudBlazor.min.js"></script>
    <script src="@Assets["_framework/blazor.web.js"]"></script>
    <script>
        window.scrollToBottom = (element) => {
            if (element) element.scrollTop = element.scrollHeight;
        };
        window.panelDrag = {
            start: function (el, dotNetRef, callbackMethod, startX, startY) {
                if (!el) return;
                const rect = el.getBoundingClientRect();
                const offsetX = startX - rect.left;
                const offsetY = startY - rect.top;
                function onMove(e) {
                    dotNetRef.invokeMethodAsync(callbackMethod + 'Move', e.clientX - offsetX, e.clientY - offsetY);
                }
                function onUp() {
                    document.removeEventListener('mousemove', onMove);
                    document.removeEventListener('mouseup', onUp);
                    dotNetRef.invokeMethodAsync(callbackMethod + 'End');
                }
                document.addEventListener('mousemove', onMove);
                document.addEventListener('mouseup', onUp);
            }
        };
        window.getElementCenters = function(elementIds) {
            return elementIds.map(function(id) {
                var el = document.getElementById(id);
                if (!el) return null;
                var rect = el.getBoundingClientRect();
                return { id: id, x: rect.x + rect.width / 2, y: rect.y + rect.height / 2 };
            });
        };
    </script>
</body>

</html>
